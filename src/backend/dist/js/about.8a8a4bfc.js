"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[443],{4545:function(e,t,a){a.r(t),a.d(t,{default:function(){return g}});var o=a(3396),n=a(7139);const r={class:"home"},s={class:"card"},c={class:"card__num"},i={class:"card__balance"};function u(e,t,a,u,d,h){return(0,o.wg)(),(0,o.iD)("div",r,[(0,o._)("button",{onClick:t[0]||(t[0]=(...e)=>h.getCards&&h.getCards(...e))},"Refresh"),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(d.cards,(e=>((0,o.wg)(),(0,o.iD)("div",{key:e.balance},[(0,o._)("div",s,[(0,o._)("p",c,(0,n.zw)(e.card),1),(0,o._)("p",i,(0,n.zw)(e.balance)+" UAH",1)])])))),128))])}var d={name:"HomeView",data(){return{cards:[]}},mounted(){this.getCards()},computed:{auth(){if(localStorage.getItem("auth_token"))return!0}},methods:{goLogin(){this.$router.push({name:"login"})},logout(){localStorage.removeItem("auth_token"),this.$router.push({name:"home"})},getCards(){fetch(window.location.origin+"/api/cards/",{method:"get",headers:{"Content-Type":"application/json","x-access-token":"token-value",Authorization:"Bearer "+localStorage.getItem("auth_token")}}).then((async e=>{const t=await e.json();if(!e.ok){const a=t&&t.message||e.statusText;return Promise.reject(a)}this.cards=t})).catch((e=>{console.log(e),"Unauthorized"===e&&this.goLogin(),this.message=e,console.error("There was an error!",e)}))}}},h=a(89);const l=(0,h.Z)(d,[["render",u]]);var g=l}}]);
//# sourceMappingURL=about.8a8a4bfc.js.map